function m(t,e){e=e||"",console.log("M"+t+" "+e)}function Game(t){this.code=Math.round(1e4*Math.random()).toString(),this.players=[],this.mines=[],this.waypoints=[],this.stage=game_stages.intro,t&&this.updateFromData(t),this.log("game initialized")}function xy(t,e){return{x:t,y:e}}function Mine(t){t=t||{},this.words=t.words,this.coords=t.coords,this.game=t.game,this.level=0}function Player(t,e){this.name=t,this.game=e,this.waypoint=xy(0,0),this.glitchLevel=0,this.coords=xy(100,100)}function setupSocket(t){var e=t.emit;return t.emit=function(){console.log(t.id+" emit: "+arguments[0]),e.apply(t,arguments)},t.bind=function(e,n){n=ensureFunction(n),t.on(e,function(){console.log(t.id+" > "+e),n.apply(null,arguments)})},t}function ensureFunction(t){return"function"==typeof t?t:function(){}}Game.prototype.log=function(t){console.log(this.code+" > "+t)};var game_stages={intro:0,gameplay:1,ending:2};Game.prototype={},Game.prototype.updateFromData=function(t){t.mines&&(t.mines=t.mines.map(function(t){return new Mine(t)}));for(var e in t)this[e]=t[e]},Game.prototype.data=function(){var t=function(t){return t.data()};return{code:this.code,stage:this.stage,waypoints:this.waypoints,mines:this.mines.map(t),players:this.players.map(t)}},Game.prototype.serialize=function(){return JSON.stringify(this.data())},Game.prototype.log=function(t){console.log(this.code+" > "+t)},Mine.prototype={},Mine.prototype.data=function(){return{words:this.words,coords:this.coords,game:this.game.code,level:this.level}},Mine.prototype.render=function(){},Mine.prototype.levelUp=function(){this.level+=1,this.render()},Mine.prototype.levelDown=function(){this.level-=1,this.render()},Player.prototype={},Player.prototype.data=function(){return{name:this.name,game:this.game.code,waypoint:this.waypoint,glitchLevel:this.glitchLevel}};var _={};"undefined"!=typeof window&&(window._=_),_.propFinder=function(t,e){return function(n){var o=t.filter(function(t){return t[e]===n});return o.length>0?o[0]:null}},_.mapProp=function(t,e){return t.map(function(t){return t[e]})};
